---
title: "Docker ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•í•˜ê¸°"
date: "2025-08-03"
description: "ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ê³¼ ê°™ì€ ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Dockerë¡œ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ React, Node.js, MongoDBë¥¼ í™œìš©í•œ ì‹¤ì „ ì˜ˆì œë¡œ ì•Œì•„ë´…ë‹ˆë‹¤"
tags: ["Docker", "Multi-Container", "Microservices", "DevOps"]
category: "DevOps"
series: "Docker ì™„ë²½ ê°€ì´ë“œ"
seriesOrder: 4
---

# Part 4: Docker ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•í•˜ê¸°

ì´ì œê¹Œì§€ ë°°ìš´ Dockerì˜ ê¸°ë³¸ ê°œë…ë“¤ì„ í™œìš©í•´ ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” React í”„ë¡ íŠ¸ì—”ë“œ, Node.js ë°±ì—”ë“œ, MongoDB ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬ì„±ëœ 3-Tier ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¨ê³„ë³„ë¡œ ë§Œë“¤ì–´ë³´ë©° ì‹¤ì „ ê²½í—˜ì„ ìŒ“ì•„ë³´ê² ìŠµë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ê°œìš”

ìš°ë¦¬ê°€ ë§Œë“¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ëª©í‘œ(Goals)ë¥¼ ê´€ë¦¬í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

### ì•„í‚¤í…ì²˜ êµ¬ì„±
- **Frontend**: React ê¸°ë°˜ SPA (Single Page Application)
- **Backend**: Node.js + Express REST API
- **Database**: MongoDB
- **Storage**: ë³¼ë¥¨ì„ í™œìš©í•œ ë°ì´í„° ì˜ì†ì„±

### í”„ë¡œì íŠ¸ êµ¬ì¡°
```
goals-app/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml
```

## Step 1: MongoDB ì»¨í…Œì´ë„ˆ ì„¤ì •

ë¨¼ì € ë°ì´í„°ë² ì´ìŠ¤ë¶€í„° ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤. MongoDBëŠ” ì¸ì¦ì´ í•„ìš”í•˜ë¯€ë¡œ í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬ì ê³„ì •ì„ ì„¤ì •í•©ë‹ˆë‹¤.

```bash
# ë„¤íŠ¸ì›Œí¬ ìƒì„±
docker network create goals-net

# MongoDB ì‹¤í–‰
docker run -d --name mongodb \
  -v goals-data:/data/db \
  -e MONGO_INITDB_ROOT_USERNAME=admin \
  -e MONGO_INITDB_ROOT_PASSWORD=secret \
  --network goals-net \
  mongo
```

### MongoDB ì¸ì¦ ë¬¸ì œ í•´ê²°

MongoDB 6.0 ì´ìƒ ë²„ì „ì—ì„œëŠ” ì¸ì¦ì´ í•„ìˆ˜ì…ë‹ˆë‹¤. ì—°ê²° ë¬¸ìì—´ì— `authSource=admin`ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:

```javascript
// backend/app.js
const mongoUrl = `mongodb://${process.env.MONGODB_USERNAME}:${process.env.MONGODB_PASSWORD}@mongodb:27017/goals?authSource=admin`;

mongoose.connect(mongoUrl, {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});
```

## Step 2: Node.js ë°±ì—”ë“œ ì„¤ì •

### Dockerfile ì‘ì„±
```dockerfile
# backend/Dockerfile
FROM node:16-alpine

WORKDIR /app

# ì˜ì¡´ì„± íŒŒì¼ ë¨¼ì € ë³µì‚¬ (ìºì‹œ ìµœì í™”)
COPY package*.json ./
RUN npm ci --only=production

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
COPY . .

EXPOSE 80

CMD ["node", "app.js"]
```

### ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ
```javascript
// backend/app.js
const express = require('express');
const mongoose = require('mongoose');
const cors = require('cors');

const app = express();

// CORS ì„¤ì • (í”„ë¡ íŠ¸ì—”ë“œì™€ í†µì‹ )
app.use(cors());
app.use(express.json());

// MongoDB ì—°ê²°
const connectDB = async () => {
  try {
    await mongoose.connect(
      `mongodb://${process.env.MONGODB_USERNAME}:${process.env.MONGODB_PASSWORD}@mongodb:27017/goals?authSource=admin`,
      {
        useNewUrlParser: true,
        useUnifiedTopology: true,
      }
    );
    console.log('MongoDB ì—°ê²° ì„±ê³µ!');
  } catch (err) {
    console.error('MongoDB ì—°ê²° ì‹¤íŒ¨:', err);
    process.exit(1);
  }
};

// Goal ëª¨ë¸
const Goal = mongoose.model('Goal', {
  text: { type: String, required: true }
});

// API ë¼ìš°íŠ¸
app.get('/goals', async (req, res) => {
  try {
    const goals = await Goal.find();
    res.json({ goals });
  } catch (err) {
    res.status(500).json({ message: 'ëª©í‘œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' });
  }
});

app.post('/goals', async (req, res) => {
  try {
    const goal = new Goal({ text: req.body.text });
    await goal.save();
    res.status(201).json({ goal });
  } catch (err) {
    res.status(500).json({ message: 'ëª©í‘œë¥¼ ì¶”ê°€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' });
  }
});

app.delete('/goals/:id', async (req, res) => {
  try {
    await Goal.findByIdAndDelete(req.params.id);
    res.json({ message: 'ëª©í‘œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.' });
  } catch (err) {
    res.status(500).json({ message: 'ëª©í‘œë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' });
  }
});

// ì„œë²„ ì‹œì‘
connectDB().then(() => {
  app.listen(80, () => {
    console.log('ë°±ì—”ë“œ ì„œë²„ê°€ 80ë²ˆ í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.');
  });
});
```

### ë°±ì—”ë“œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```bash
# ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t goals-backend ./backend

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (ê°œë°œ ëª¨ë“œ)
docker run -d --name goals-backend \
  -v $(pwd)/backend:/app \
  -v /app/node_modules \
  -e MONGODB_USERNAME=admin \
  -e MONGODB_PASSWORD=secret \
  --network goals-net \
  -p 80:80 \
  goals-backend
```

## Step 3: React í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •

### Dockerfile ì‘ì„±
```dockerfile
# frontend/Dockerfile
FROM node:16-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 3000

CMD ["npm", "start"]
```

### í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ
```javascript
// frontend/src/App.js
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import './App.css';

function App() {
  const [goals, setGoals] = useState([]);
  const [newGoal, setNewGoal] = useState('');

  // ë°±ì—”ë“œ URL (í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì • ê°€ëŠ¥)
  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost';

  useEffect(() => {
    fetchGoals();
  }, []);

  const fetchGoals = async () => {
    try {
      const response = await axios.get(`${API_URL}/goals`);
      setGoals(response.data.goals);
    } catch (error) {
      console.error('ëª©í‘œë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:', error);
    }
  };

  const addGoal = async (e) => {
    e.preventDefault();
    if (!newGoal.trim()) return;

    try {
      await axios.post(`${API_URL}/goals`, { text: newGoal });
      setNewGoal('');
      fetchGoals();
    } catch (error) {
      console.error('ëª©í‘œ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:', error);
    }
  };

  const deleteGoal = async (id) => {
    try {
      await axios.delete(`${API_URL}/goals/${id}`);
      fetchGoals();
    } catch (error) {
      console.error('ëª©í‘œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:', error);
    }
  };

  return (
    <div className="App">
      <h1>ë‚˜ì˜ ëª©í‘œ ê´€ë¦¬</h1>
      
      <form onSubmit={addGoal}>
        <input
          type="text"
          value={newGoal}
          onChange={(e) => setNewGoal(e.target.value)}
          placeholder="ìƒˆë¡œìš´ ëª©í‘œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
        />
        <button type="submit">ì¶”ê°€</button>
      </form>

      <ul className="goals-list">
        {goals.map((goal) => (
          <li key={goal._id}>
            <span>{goal.text}</span>
            <button onClick={() => deleteGoal(goal._id)}>ì‚­ì œ</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default App;
```

### í”„ë¡ íŠ¸ì—”ë“œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```bash
# ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t goals-frontend ./frontend

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (ê°œë°œ ëª¨ë“œ)
docker run -d --name goals-frontend \
  -v $(pwd)/frontend/src:/app/src \
  -e REACT_APP_API_URL=http://localhost \
  --network goals-net \
  -p 3000:3000 \
  goals-frontend
```

## Step 4: ê°œë°œ í™˜ê²½ ìµœì í™”

### ë¬¸ì œì ë“¤ê³¼ í•´ê²° ë°©ë²•

#### 1. ë¼ì´ë¸Œ ë¦¬ë¡œë”© ì„¤ì •
React ê°œë°œ ì„œë²„ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ íŒŒì¼ ë³€ê²½ì„ ê°ì§€í•˜ì§€ë§Œ, Docker í™˜ê²½ì—ì„œëŠ” ì¶”ê°€ ì„¤ì •ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
// frontend/package.json
{
  "scripts": {
    "start": "WATCHPACK_POLLING=true react-scripts start"
  }
}
```

#### 2. ë°±ì—”ë“œ ìë™ ì¬ì‹œì‘ (Nodemon)
```javascript
// backend/package.json
{
  "scripts": {
    "start": "node app.js",
    "dev": "nodemon -L app.js"  // -Lì€ polling ëª¨ë“œ
  },
  "devDependencies": {
    "nodemon": "^2.0.0"
  }
}
```

```dockerfile
# backend/Dockerfile.dev
FROM node:16-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
CMD ["npm", "run", "dev"]
```

#### 3. ë¡œê·¸ ê´€ë¦¬
```bash
# ë°±ì—”ë“œì— ë¡œê·¸ ë³¼ë¥¨ ì¶”ê°€
docker run -d --name goals-backend \
  -v $(pwd)/backend:/app \
  -v logs:/app/logs \
  -v /app/node_modules \
  # ... ê¸°íƒ€ ì˜µì…˜
```

## Step 5: ì „ì²´ ìŠ¤íƒ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

ëª¨ë“  ì»¨í…Œì´ë„ˆë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤. ìŠ¤í¬ë¦½íŠ¸ë¡œ ìë™í™”í•´ë´…ì‹œë‹¤.

### start.sh
```bash
#!/bin/bash

echo "ğŸš€ Goals ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘..."

# ë„¤íŠ¸ì›Œí¬ ìƒì„±
docker network create goals-net 2>/dev/null

# MongoDB ì‹œì‘
echo "ğŸ“¦ MongoDB ì‹œì‘..."
docker run -d --name mongodb \
  -v goals-data:/data/db \
  -e MONGO_INITDB_ROOT_USERNAME=admin \
  -e MONGO_INITDB_ROOT_PASSWORD=secret \
  --network goals-net \
  mongo

# MongoDBê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°
echo "â³ MongoDB ì´ˆê¸°í™” ëŒ€ê¸°..."
sleep 5

# ë°±ì—”ë“œ ì‹œì‘
echo "ğŸ”§ ë°±ì—”ë“œ ì„œë²„ ì‹œì‘..."
docker build -t goals-backend ./backend
docker run -d --name goals-backend \
  -v $(pwd)/backend:/app \
  -v /app/node_modules \
  -e MONGODB_USERNAME=admin \
  -e MONGODB_PASSWORD=secret \
  --network goals-net \
  -p 80:80 \
  goals-backend

# í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘
echo "ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘..."
docker build -t goals-frontend ./frontend
docker run -d --name goals-frontend \
  -v $(pwd)/frontend/src:/app/src \
  -e REACT_APP_API_URL=http://localhost \
  -p 3000:3000 \
  goals-frontend

echo "âœ… ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!"
echo "í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:3000"
echo "ë°±ì—”ë“œ API: http://localhost"
```

### stop.sh
```bash
#!/bin/bash

echo "ğŸ›‘ Goals ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ..."

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ë° ì œê±°
docker stop goals-frontend goals-backend mongodb
docker rm goals-frontend goals-backend mongodb

# ë„¤íŠ¸ì›Œí¬ ì œê±°
docker network rm goals-net

echo "âœ… ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
```

## í”„ë¡œë•ì…˜ ê³ ë ¤ì‚¬í•­

### 1. í™˜ê²½ ë¶„ë¦¬
```javascript
// backend/config.js
module.exports = {
  development: {
    mongoUri: 'mongodb://admin:secret@mongodb:27017/goals-dev?authSource=admin',
    port: 80,
    cors: {
      origin: 'http://localhost:3000'
    }
  },
  production: {
    mongoUri: process.env.MONGODB_URI,
    port: process.env.PORT || 80,
    cors: {
      origin: process.env.FRONTEND_URL
    }
  }
};
```

### 2. ë³´ì•ˆ ê°•í™”
```dockerfile
# í”„ë¡œë•ì…˜ Dockerfile
FROM node:16-alpine

# ë³´ì•ˆì„ ìœ„í•œ non-root ì‚¬ìš©ì
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nodejs -u 1001

WORKDIR /app

COPY --chown=nodejs:nodejs package*.json ./
RUN npm ci --only=production

COPY --chown=nodejs:nodejs . .

USER nodejs

EXPOSE 80

CMD ["node", "app.js"]
```

### 3. í—¬ìŠ¤ ì²´í¬ ì¶”ê°€
```javascript
// backend/app.js
app.get('/health', async (req, res) => {
  try {
    // MongoDB ì—°ê²° ìƒíƒœ í™•ì¸
    const dbState = mongoose.connection.readyState;
    const isHealthy = dbState === 1;
    
    res.status(isHealthy ? 200 : 503).json({
      status: isHealthy ? 'healthy' : 'unhealthy',
      database: dbState === 1 ? 'connected' : 'disconnected',
      uptime: process.uptime()
    });
  } catch (error) {
    res.status(503).json({ status: 'error', message: error.message });
  }
});
```

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. CORS ì—ëŸ¬
```javascript
// backend/app.js
app.use(cors({
  origin: process.env.FRONTEND_URL || 'http://localhost:3000',
  credentials: true
}));
```

### 2. MongoDB ì—°ê²° ì‹¤íŒ¨
```bash
# MongoDB ë¡œê·¸ í™•ì¸
docker logs mongodb

# ì—°ê²° í…ŒìŠ¤íŠ¸
docker exec -it goals-backend ping mongodb
```

### 3. ë„¤íŠ¸ì›Œí¬ í†µì‹  ë¬¸ì œ
```bash
# ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
docker network inspect goals-net

# ì»¨í…Œì´ë„ˆ ê°„ í†µì‹  í…ŒìŠ¤íŠ¸
docker exec -it goals-backend curl http://mongodb:27017
```

## ëª¨ë²” ì‚¬ë¡€ ì •ë¦¬

1. **ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬**: ì»¤ìŠ¤í…€ ë„¤íŠ¸ì›Œí¬ë¡œ ì»¨í…Œì´ë„ˆ ê°„ ì•ˆì „í•œ í†µì‹ 
2. **ë°ì´í„° ì˜ì†ì„±**: ë°ì´í„°ë² ì´ìŠ¤ëŠ” ëª…ëª…ëœ ë³¼ë¥¨ ì‚¬ìš©
3. **ê°œë°œ í¸ì˜ì„±**: ì†ŒìŠ¤ ì½”ë“œëŠ” ë°”ì¸ë“œ ë§ˆìš´íŠ¸ë¡œ ì‹¤ì‹œê°„ ë°˜ì˜
4. **ë³´ì•ˆ**: í™˜ê²½ ë³€ìˆ˜ë¡œ ë¯¼ê°í•œ ì •ë³´ ê´€ë¦¬
5. **ì˜ì¡´ì„± ê´€ë¦¬**: ê° ì„œë¹„ìŠ¤ì˜ ì˜ì¡´ì„±ì„ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬

## ë§ˆë¬´ë¦¬

ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê°™ì€ ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ êµ¬ì¶•í•´ë³´ì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê° ì»¨í…Œì´ë„ˆë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ì—¬ì „íˆ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤. 

ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì´ëŸ¬í•œ ë³µì¡í•œ ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ **Docker Compose**ë¡œ ê°„ë‹¨í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. YAML íŒŒì¼ í•˜ë‚˜ë¡œ ì „ì²´ ìŠ¤íƒì„ ì •ì˜í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë§ˆë²• ê°™ì€ ë„êµ¬ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”!

---

**ì‹œë¦¬ì¦ˆ ë„¤ë¹„ê²Œì´ì…˜**
- â† ì´ì „: [Part 3: Docker ë„¤íŠ¸ì›Œí‚¹](/posts/docker-networking)
- â†’ ë‹¤ìŒ: [Part 5: Docker Compose](/posts/docker-compose-orchestration)