# 트러블슈팅: 모바일에서 넓은 테이블이 페이지 전체를 가로로 밀어내는 문제

## 증상

- **모바일**: 열이 많은 테이블이 포함된 포스트에서 뷰포트 너비를 초과하여 오른쪽에 빈 공간 발생
- **PC(데스크톱)**: 동일한 문제가 발생하지만 화면이 넓어 체감이 적음
- 페이지 전체가 좌우로 스크롤되며, 테이블이 없는 영역에서도 빈 공간이 보임

## 원인 분석

### 1단계: 오버플로 발생 지점 파악

MDX에서 렌더링되는 `<table>`은 별도의 래퍼 없이 `.prose` 컨테이너 안에 직접 출력된다. 열이 많거나 셀 내용이 긴 테이블은 `min-content` 너비가 뷰포트를 초과한다.

```
[viewport: 375px]
┌─────────────────────────────┐
│  .prose (max-width: 800px)  │
│  ┌──────────────────────────┼──── table (실제 너비: 900px)
│  │ col1 │ col2 │ col3 │ ...│...│
│  └──────────────────────────┼────
└─────────────────────────────┘
                              ↑ 오버플로 → 페이지 전체 가로 스크롤
```

### 2단계: 임시 조치의 한계

이전에 `body`에 `overflow-x: hidden`을 적용하여 가로 스크롤을 숨겼다:

```css
body {
  overflow-x: hidden; /* 임시 조치 */
}
```

이 방법의 문제점:
- **증상만 숨김**: 테이블 오른쪽 부분이 잘려서 내용을 볼 수 없음
- **접근성 저하**: 테이블 데이터 일부에 접근 불가
- **부작용**: 다른 요소의 정당한 가로 스크롤까지 차단할 수 있음

### 3단계: 근본 원인

`mdx-components.tsx`에서 `<table>`에 대한 커스텀 컴포넌트가 정의되어 있지 않아, MDX가 기본 HTML `<table>`을 그대로 렌더링한다. HTML `<table>`은 기본적으로 내용에 맞게 확장되며, 부모 컨테이너의 `overflow` 설정 없이는 오버플로가 상위로 전파된다.

```
table (min-content > viewport)
  → .prose 오버플로
    → article 오버플로
      → body 오버플로
        → 페이지 전체 가로 스크롤
```

## 해결 방법

### 1. 테이블 래퍼 컴포넌트 추가

`mdx-components.tsx`에 `table` 커스텀 컴포넌트를 추가하여 `overflow-x: auto` 래퍼 `<div>`로 감싼다:

```tsx
table: ({ children, ...props }: ComponentProps<'table'>) => (
  <div className="overflow-x-auto -mx-4 px-4 md:mx-0 md:px-0">
    <table {...props}>{children}</table>
  </div>
),
```

핵심 포인트:
- **`overflow-x: auto`**: 테이블이 래퍼를 초과할 때만 가로 스크롤바 표시
- **`-mx-4 px-4`**: 모바일에서 래퍼를 부모 패딩 바깥까지 확장하여 스크롤 영역을 넓힘
- **`md:mx-0 md:px-0`**: 데스크톱에서는 네거티브 마진 제거 (충분한 공간)

스크롤 컨텍스트가 래퍼 `<div>`에서 끊기므로 오버플로가 상위로 전파되지 않는다:

```
div.overflow-x-auto (스크롤 컨테이너)
  └─ table (넓어도 래퍼 안에서만 스크롤)
```

### 2. body의 overflow-x: hidden 제거

근본 원인이 해결되었으므로 임시 조치를 제거한다:

```css
/* Before */
body {
  overflow-x: hidden;
  overflow-y: scroll;
}

/* After */
body {
  overflow-y: scroll;
}
```

## 수정 파일

- `components/mdx-components.tsx`: `table` 커스텀 컴포넌트 추가 (래퍼 `<div>` 삽입)
- `app/globals.css`: `body`의 `overflow-x: hidden` 제거

## 검증 방법

1. `npm run build` — 빌드 성공 확인
2. 테이블이 포함된 포스트를 모바일 뷰포트(375px)에서 확인:
   - 테이블이 자체적으로 가로 스크롤됨
   - 페이지 전체는 가로 스크롤 안 됨
   - 테이블 외 영역에 빈 공간 없음
3. 데스크톱에서 동일 포스트 확인:
   - 테이블이 정상 렌더링됨
   - 불필요한 스크롤바 없음

## 교훈

1. **`overflow-x: hidden`은 가로 오버플로의 해결이 아니라 은폐다** — 콘텐츠가 잘리므로 접근성과 사용성을 해친다. 오버플로의 원인을 찾아 해당 요소에서 `overflow-x: auto`로 처리해야 한다.
2. **MDX 커스텀 컴포넌트로 HTML 요소를 래핑하면 레이아웃 문제를 구조적으로 해결할 수 있다** — `<table>`, `<img>`, `<iframe>` 등 기본 HTML 요소가 반응형 레이아웃을 깨뜨릴 때 래퍼 패턴이 유효하다.
3. **네거티브 마진 패턴(`-mx-4 px-4`)은 모바일에서 콘텐츠 영역을 확장하는 일반적인 기법이다** — 부모의 패딩 안에 갇힌 요소를 시각적으로 전체 너비로 확장할 때 사용한다.
